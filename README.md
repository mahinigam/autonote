# autonote

A production-ready Flask web application that transforms documents into structured bullet-point notes using **offline A## 📋 Dependencies

- **Flask**: Web framework
- **Flask-Limiter**: Rate limiting
- **transformers**: Offline AI summarization models
- **torch**: Deep learning framework for AI models
- **pytesseract**: OCR for images
- **opencv-python**: Image preprocessing for better OCR
- **PyMuPDF**: PDF text and image extraction
- **python-docx**: DOCX processing
- **reportlab**: PDF generation
- **Pillow**: Image processing.

## 🚀 Features

- **🤖 100% Offline AI**: Uses local BART/PEGASUS models for summarization (no internet required)
- **📄 Multi-format input support**: Text, PDF, DOCX, and image files (PNG/JPG with enhanced OCR)
- **🔍 Advanced OCR**: OpenCV preprocessing for better image text extraction
- **📊 Smart PDF processing**: Extracts both text and images from PDFs
- **📤 Multiple export formats**: Download notes as TXT, MD, PDF, or DOCX
- **⚡ Rate limiting**: 100 requests per day, 10 per minute
- **🎨 Responsive design**: Clean, modern UI with Tailwind CSS
- **☁️ Cloud ready**: Optimized for Render deployment

## 🔧 AI Technology Stack

- **Primary**: Facebook BART-large-CNN (offline, high quality)
- **Fallback**: DistilBART (offline, faster)
- **Final Fallback**: Rule-based summarization
- **OCR**: Tesseract with OpenCV preprocessing
- **PDF**: PyMuPDF with image extraction

## Supported File Types

- **Text**: Direct text input via textarea
- **PDF**: Extracting text from PDF documents
- **DOCX**: Microsoft Word document processing
- **Images**: PNG/JPG files with OCR text extraction
- **TXT**: Plain text file upload

## 🚀 Deployment on Render

1. Fork this repository
2. Connect your GitHub repository to Render
3. Use the following settings:
   - **Environment**: Python
   - **Plan**: Starter (required for AI models)
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `gunicorn app:app --timeout 120 --workers 1 --max-requests 100`
4. Set environment variables in Render dashboard:
   - `SECRET_KEY`: Generate a secure secret key
   - `FLASK_ENV`: Set to `production`

**Note**: The starter plan ($7/month) is required due to memory requirements of AI models. The free plan has insufficient RAM.

## 💻 Local Development

1. Clone the repository:
```bash
git clone https://github.com/mahinigam/autonote.git
cd autonote
```

2. Create and activate virtual environment:
```bash
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
```

3. Install dependencies:
```bash
pip install -r requirements.txt
```

4. Generate secure environment variables:
```bash
python generate_env.py
```
*This will create a `.env` file with a cryptographically secure secret key*

5. Run the application:
```bash
python app.py
```

The app will be available at `http://localhost:5000`

### Manual Secret Key Generation
If you prefer to generate keys manually:
```bash
python -c "import secrets; print('SECRET_KEY=' + secrets.token_urlsafe(32))"
```

## ⚙️ Configuration

Environment variables:

- `SECRET_KEY`: Flask secret key for sessions
  - **Local**: Auto-generated using `secrets.token_urlsafe(32)`
  - **Production**: Auto-generated by Render or set manually with 64+ characters
- `FLASK_ENV`: Set to `development` for local, `production` for deployment  

### Security Notes:
- Secret keys are generated using Python's cryptographically secure `secrets` library
- Keys are automatically generated if not provided in environment variables
- Never use the same secret key across different environments
- The `.env` file is in `.gitignore` to prevent accidental commits

## Project Structure

```
autonote/
├── app.py                 # Main Flask application
├── config.py              # Configuration settings
├── requirements.txt       # Python dependencies
├── render.yaml           # Render deployment config
├── runtime.txt           # Python version specification
├── .env.example          # Environment variables template
├── templates/            # Jinja2 templates
│   ├── base.html         # Base template
│   ├── index.html        # Home page
│   └── result.html       # Results page
├── static/               # Static assets
│   ├── css/logo.css      # Logo styling
│   └── images/           # Images
├── utils/                # Utility modules
│   ├── ocr.py           # Image OCR processing
│   ├── pdf_reader.py    # PDF text extraction
│   ├── docx_reader.py   # DOCX text extraction
│   ├── summarizer.py    # AI summarization
│   ├── file_exports.py  # Export utilities
│   └── cleanup.py       # Background cleanup
└── downloads/           # Temporary file storage
```

## Usage

1. **Text Input**: Paste text directly into the textarea
2. **File Upload**: Upload PDF, DOCX, TXT, or image files (max 10MB)
3. **Generate Notes**: Click "Generate Notes" to create structured bullet points
4. **Download**: Choose from TXT, MD, PDF, or DOCX export formats

## Development

### Running Tests

```bash
python -m pytest tests/
```

### Code Formatting

```bash
black .
flake8 .
```

### Contributing

1. Fork the repository
2. Create a feature branch: `git checkout -b feature-name`
3. Make changes and commit: `git commit -am 'Add feature'`
4. Push to branch: `git push origin feature-name`
5. Create Pull Request

## License

MIT License - see LICENSE file for details

## Support

For issues and questions, please create an issue on GitHub.
